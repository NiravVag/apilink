<div class="main-wrapper">
    <div class="wrapper dashboard-wrapper mandays-dashboard-wrapper">
        <div class="filter-bar-container" *ngIf="masterModel.filterDataShown">
            <div class="my-dashboard-container" *ngIf="!isMobile">
                <p class="heading">
                    {{'COMMON.LBL_DATA_SHOWING' | translate}}
                </p>
                <ul class="applied-filter-list">
                    <li *ngIf="model.fromDate">
                        {{'DEFECT_DASHBOARD.LBL_FROMDATE' | translate}} : {{model.fromDate.day}}/ {{model.fromDate.month}}/ {{model.fromDate.year}}
                        <span *ngIf="model.toDate" class="ml-2">
							{{'DEFECT_DASHBOARD.LBL_TODATE' | translate}} :
							{{model.toDate.day}}/
							{{model.toDate.month}}/
							{{model.toDate.year}}
						</span>
                    </li>
                    <li *ngIf="masterModel.customerName">
                        {{ 'DEFECT_DASHBOARD.LBL_CUSTOMER' | translate }} : {{masterModel.customerName}}
                    </li>
                    <li *ngIf="masterModel.supplierName">{{ 'DEFECT_DASHBOARD.LBL_SUPPLIER' | translate }} : {{masterModel.supplierName}}
                    </li>
                    <li *ngIf="masterModel.countryListName && masterModel.countryListName.length >0">
                        {{ 'DEFECT_DASHBOARD.LBL_FACTORY_COUNTRY' | translate}} : {{masterModel.countryListName}}
                    </li>
                    <li *ngIf="(model.factoryIds && model.factoryIds.length >0)">
                        {{ 'DEFECT_DASHBOARD.LBL_MORE' | translate}} ...
                    </li>
                </ul>
            </div>
            <div class="my-dashboard-container" *ngIf="isMobile">
                <p class="heading">
                    {{masterModel.filterCount}} {{'COMMON.LBL_FILTER_SELECTED' | translate}}
                </p>
                <div class="filter-reset-cta" (click)="reset()">
                    <img src="assets/images/reset-white.svg" alt=""> {{'COMMON.LBL_RESET' | translate}}
                </div>
            </div>
        </div>

        <div class="filter-container style-2" [@expandCollapse]="isFilterOpen ? 'open' : 'close'" [@.disabled]="isMobile">
            <div class="my-dashboard-container customer-dashboard-mobile-filter">
                <div class="row">
                    <div class="col-sm-3 mobile-margin-top-15">
                        <div class="my-input-group">
                            <label for="">{{'DEFECT_DASHBOARD.LBL_DATE_PERIOD' | translate}}</label>
                            <div class="d-flex">
                                <div class="calendar-wrapper inline mr-2">
                                    <input type="text" maxlength="10" container="body" [(ngModel)]="model.fromDate" ngbDatepicker #sdf="ngbDatepicker" [ngClass]="{ 'is-invalid':  !validator.isValid('fromdate')}" (click)="sdf.toggle()" (ngModelChange)="fromDateChange($event)">
                                    <img src="assets/images/calendar-icon.svg" alt="" class="calendar-icon" (click)="sdf.toggle()">

                                </div>
                                <div class="calendar-wrapper inline">
                                    <input type="text" maxlength="10" container="body" [(ngModel)]="model.toDate" ngbDatepicker #sdt="ngbDatepicker" [ngClass]="{ 'is-invalid':  !validator.isValid('toDate')}" (ngModelChange)="toDateChange($event)" (click)="sdt.toggle()">
                                    <img src="assets/images/calendar-icon.svg" alt="" class="calendar-icon" (click)="sdt.toggle()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 mobile-margin-top-15">
                        <div class="my-input-group">
                            <label for="">{{'DEFECT_DASHBOARD.LBL_CUSTOMER' | translate}}</label>
                            <ng-select bindLabel="name" bindValue="id" [multiple]="false" [items]="masterModel.customerList" [clearable]="false" [(ngModel)]="model.customerId" [virtualScroll]="true" (scrollToEnd)="getCustomerData(true)" [typeahead]="masterModel.customerInput" [minTermLength]="3"
                                (change)="changeCustomerData($event)" placeholder="--- {{ (masterModel.customerList!=null && masterModel.customerList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---" appendTo="body" [loading]="masterModel.customerLoading">
                                <ng-template ng-option-tmp let-item="item">
                                    <div class="text-wrap">{{ item.name }}</div>
                                </ng-template>
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-sm-3 mobile-margin-top-15 dashboard-supplier-margin">
                        <div class="my-input-group">
                                <div class="styled-radio-container" *ngFor="let item of supplierTypeList;let idx = index">
                                  <input type="radio" class="styled-radio" id="{{item.id}}" name="radio-group3" [value]="item.id"
                                    [checked]="true"  [(ngModel)]="model.supplierTypeId"
                                    (change)="changeSupplierType(item)">
                                  <label for="{{item.id}}">{{item.name}}</label>
                                </div>                              
                                <ng-select appendTo="body" [items]="masterModel.supplierList" [virtualScroll]="true" [loading]="masterModel.supplierLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.supplierList!=null && masterModel.supplierList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                [typeahead]="masterModel.supplierInput" [minTermLength]="3" [(ngModel)]="model.supplierId" [multiple]="false" (scrollToEnd)="getSupplierData()" (clear)="clearSupplier()"
                                           [disabled]="currentUser.usertype == userTypeEnum.Supplier" 
                                           (change)="supplierChange($event)" #select>
                                <ng-template ng-option-tmp let-item="item">
                                    <div class="text-wrap"><span>{{item.name}}</span></div>
                                </ng-template>
                            </ng-select>
                        </div>
                    </div>

                    <div class="col-sm-3 mobile-margin-top-15">
                        <div class="my-input-group">
                            <label for="">{{'DEFECT_DASHBOARD.LBL_FACTORY' | translate}}</label>
                            <ng-select appendTo="body" [items]="masterModel.factoryList" [virtualScroll]="true" [loading]="masterModel.factoryLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.factoryList!=null && masterModel.factoryList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                [disabled]="currentUser.usertype == userTypeEnum.Factory" [typeahead]="masterModel.factoryInput" [minTermLength]="3" [(ngModel)]="model.factoryIds" [multiple]="true" (scrollToEnd)="getFactoryData()" class="multiple" (change)="factoryChange($event)" #select>
                                <!-- <ng-template ng-multi-label-tmp let-items="model.factoryIds" let-clear="clear">
                                    <div class="ng-value" *ngIf="model.factoryIds && model.factoryIds.length > 0">
                                        <span class="ng-value-label">{{model.factoryIds.length}}
											{{'COMMON.LBL_SELECTED' | translate }}</span>
                                    </div>
                                </ng-template> -->
                            </ng-select>
                        </div>
                    </div>
                </div>
                <div [hidden]="!toggleFormSection">
                    <div class="row marginTop20">
                        <div class="col-sm-3 mobile-margin-top-15">
                            <div class="my-input-group">
                                <label for="">{{'REJECTION_DASHBOARD.LBL_BRAND' | translate}}</label>
                                <ng-select appendTo="body" [items]="masterModel.brandList" [virtualScroll]="true" [loading]="masterModel.brandLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.brandList && masterModel.brandList.length>0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                    [typeahead]="masterModel.brandInput" [minTermLength]="3" [(ngModel)]="model.selectedBrandIdList" [multiple]="true" class="multiple" (scrollToEnd)="getBrandData()" #select>

                                    <ng-template ng-multi-label-tmp let-items="model.selectedBrandIdList" let-clear="clear">
                                        <div class="ng-value" *ngIf="model.selectedBrandIdList && model.selectedBrandIdList.length > 0">
                                            <span class="ng-value-label">{{model.selectedBrandIdList.length}}
												{{'COMMON.LBL_SELECTED' | translate }}</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="col-sm-3 mobile-margin-top-15">
                            <div class="my-input-group">
                                <label for="">{{'REJECTION_DASHBOARD.LBL_DEPARTMENT' | translate}}</label>
                                <ng-select appendTo="body" [items]="masterModel.deptList" [virtualScroll]="true" [loading]="masterModel.deptLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.deptList && masterModel.deptList.length>0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                    [typeahead]="masterModel.deptInput" [minTermLength]="3" [(ngModel)]="model.selectedDeptIdList" [multiple]="true" class="multiple" (scrollToEnd)="getDeptData()" #select>

                                    <ng-template ng-multi-label-tmp let-items="model.selectedDeptIdList" let-clear="clear">
                                        <div class="ng-value" *ngIf="model.selectedDeptIdList && model.selectedDeptIdList.length > 0">
                                            <span class="ng-value-label">{{model.selectedDeptIdList.length}}
												{{'COMMON.LBL_SELECTED' | translate }}</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="col-sm-3 mobile-margin-top-15">
                            <div class="my-input-group">
                                <label for="">{{'REJECTION_DASHBOARD.LBL_BUYER' | translate}}</label>
                                <ng-select appendTo="body" [items]="masterModel.buyerList" [virtualScroll]="true" [loading]="masterModel.buyerLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.buyerList && masterModel.buyerList.length>0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                    [typeahead]="masterModel.buyerInput" [minTermLength]="3" [(ngModel)]="model.selectedBuyerIdList" [multiple]="true" class="multiple" (scrollToEnd)="getBuyerData()" #select>

                                    <ng-template ng-multi-label-tmp let-items="model.selectedBuyerIdList" let-clear="clear">
                                        <div class="ng-value" *ngIf="model.selectedBuyerIdList && model.selectedBuyerIdList.length > 0">
                                            <span class="ng-value-label">{{model.selectedBuyerIdList.length}}
												{{'COMMON.LBL_SELECTED' | translate }}</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="col-sm-3 mobile-margin-top-15">
                            <div class="my-input-group">
                                <label for="">{{'REJECTION_DASHBOARD.LBL_COLLECTION' | translate}}</label>
                                <ng-select appendTo="body" [items]="masterModel.collectionList" [virtualScroll]="true" [loading]="masterModel.collectionLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.collectionList && masterModel.collectionList.length>0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                    [typeahead]="masterModel.collectionInput" [minTermLength]="3" [(ngModel)]="model.selectedCollectionIdList" [multiple]="true" class="multiple" (scrollToEnd)="getCollectionData()" #select>

                                    <ng-template ng-multi-label-tmp let-items="model.selectedCollectionIdList" let-clear="clear">
                                        <div class="ng-value" *ngIf="model.selectedCollectionIdList && model.selectedCollectionIdList.length > 0">
                                            <span class="ng-value-label">{{model.selectedCollectionIdList.length}}
												{{'COMMON.LBL_SELECTED' | translate }}</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="row marginTop15">
                                <div class="col-sm-3 col-md-3 col-lg-3 mobile-margin-top-15">
                                    <div class="my-input-group">
                                        <label for="">{{ 'DEFECT_DASHBOARD.LBL_COUNTRY' | translate}}</label>
                                        <ng-select appendTo="body" [items]="masterModel.countryList" [virtualScroll]="true" [loading]="masterModel.countryLoading" bindLabel="name" bindValue="id" placeholder="--- {{ (masterModel.countryList!=null && masterModel.countryList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                            [typeahead]="masterModel.countryInput" [minTermLength]="3" [(ngModel)]="model.factoryCountryIds" [multiple]="true" class="multiple" (scrollToEnd)="getCountryData()" (change)="countryChange($event)" #select>
                                            <ng-template ng-multi-label-tmp let-items="model.factoryCountryIds" let-clear="clear">
                                                <div class="ng-value" *ngIf="model.factoryCountryIds && model.factoryCountryIds.length > 0">
                                                    <span class="ng-value-label">{{model.factoryCountryIds.length}}
														{{'COMMON.LBL_SELECTED' | translate }}</span>
                                                </div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 mobile-margin-top-15">
                                    <div class="my-input-group">
                                        <label for="">{{ 'DEFECT_DASHBOARD.LBL_PRODUCT_CATEGORY' | translate}}</label>
                                        <ng-select [items]="masterModel.productCategoryList" bindLabel="name" bindValue="id" [hideSelected]="false" [clearable]="true" [searchable]="true" appendTo="body" [multiple]="true" class="multiple" [loading]="masterModel.productCategoryListLoading" placeholder="--- {{ (masterModel.productCategoryList && masterModel.productCategoryList.length>0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA') | translate }} ---"
                                            [(ngModel)]="model.selectedProdCategoryIdList">
                                            <ng-template ng-option-tmp let-item="item">
                                                <div class="text-wrap">{{ item.name }}</div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                                <div class="col-sm-3 col-md-3 col-lg-3 mobile-margin-top-15">
                                    <div class="my-input-group">
                                        <label for="">{{ 'DEFECT_DASHBOARD.LBL_PRODUCT' | translate }}</label>
                                        <ng-select appendTo="body" [items]="masterModel.productList" [virtualScroll]="true" [loading]="masterModel.productLoading" bindLabel="productId" bindValue="id" class="width-180" (clear)="clearProductRef()" placeholder="--- {{ (masterModel.productList!=null && masterModel.productList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                            [typeahead]="masterModel.productInput" [minTermLength]="3" (change)="changeProductRef()" [(ngModel)]="model.selectedProductIdList" [multiple]="true" class="multiple" (scrollToEnd)="getProductData()" #select>
                                            <ng-template ng-option-tmp let-item="item">
                                                <div class="text-wrap">{{ item.productId }}</div>
                                            </ng-template>
                                        </ng-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row marginTop25">
                    <div class="col-12 col-sm-6">
                        <button class="tertiary-cta small" (click)="toggleSection()">
							<span class="icon" *ngIf="!toggleFormSection">+</span>
							<span class="icon" *ngIf="toggleFormSection">-</span>
							{{'COMMON.LBL_ADVANCED_SEARCH' | translate}}
						</button>
                    </div>
                    <div class="col-12 col-sm-6 text-right mt-3 mt-sm-0">
                        <div class="mobile-hide">
                            <button class="category-cta small mr-2" (click)="reset()">
								<img src="assets/images/reload-new.svg" alt="reload">
								<span>{{'DEFECT_DASHBOARD.LBL_RELOAD' | translate}}</span>
							</button>
                            <button class="primary-cta small" (click)="search()" [disabled]="masterModel.searchLoading">
								{{'COMMON.LBL_SEARCH' | translate }}
								<span *ngIf="masterModel.searchLoading">
									<i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
								</span></button>
                        </div>
                    </div>
                </div>
                <div class="col-12 filter-cta-container">
                    <button class="primary-cta small float-right" (click)="search();toggleFilter()">{{'COMMON.LBL_APPLY' |
						translate}}</button>
                    <button class="tertiary-cta small float-right mr-2" (click)="reset();toggleFilter()">{{ 'COMMON.LBL_CONFIRMCANCEL'
						| translate }}</button>
                </div>
            </div>
        </div>
       
        <div class="my-dashboard-container">
            <div class="dashboard-body dashbaord-placeholder-container maydays-dashboard-placeholder-container">
                <div class="title-container row align-items-center">
                    <div class="col-8">
                        <h3 class="main-title">{{'DEFECT_DASHBOARD.LBL_TITLE' | translate}}</h3>
                    </div>
                    <div class="col-4 text-right">
                        <div class="filter-cta style-2" *ngIf="!isFilterOpen" (click)="toggleFilter()">
                            <img src="assets/images/cta-filter-grey.svg" alt="">
                        </div>
                        <div class="filter-cta filter-active" *ngIf="isFilterOpen" (click)="toggleFilter()">
                            <img src="assets/images/cta-close-white.svg" alt="">
                        </div>
                    </div>
                </div>
                <div class="row customer-dashboard-graph-wrapper full-height-column-wrapper mt-0">
                    <div class="col-lg-6 grid-column col-md-12">
                        <ng-container *ngIf="masterModel.defectCategoryLoading; else DefectCategoryResult">
                            <div class="dashboard-graph-container">
                                <div class="row graph-body">
                                    <div class="col-sm-4">
                                        <img class="graph-icon" src="assets/images/donut-placeholder.png" alt="graph">
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="legend-wrapper">
                                            <div class="content-container">
                                                <div class="rect width250 animate"></div>
                                                <div class="rect width80 animate"></div>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-template #DefectCategoryResult>
                            <div class="error-container" *ngIf="masterModel.defectCategoryError; else CategoryFound">
                                <img src="assets/images/went-wrong.svg" alt="" class="thumbnail">
                                <h4 class="error-title">{{ 'ERROR.MSG_ERROR_TITLE' | translate }}</h4>
                                <p class="error-subtitle">
                                    {{'DEFECT_DASHBOARD.LBL_UNAUTHORISED_ACCESS' | translate}}
                                </p>
                            </div>
                            <ng-template #CategoryFound>
                                <div class="error-container dashboard-graph-container" *ngIf="!masterModel.defectCategoryFound">
                                    <div class="new-graph-head text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_DEFECT_CATEGORY' | translate}}
                                            </h3>
                                        </div>
                                    </div>
                                    <img src="assets/images/no-data.svg" alt="" class="thumbnail">
                                    <h4 class="error-title">{{ 'COMMON.LBL_No_ITEM' | translate }}
                                    </h4>
                                    <p class="error-subtitle">{{'COMMON.LBL_NO_DATA_EMPTY' | translate}}</p>
                                </div>
                                <div class="dashboard-graph-container" *ngIf="masterModel.defectCategoryFound">
                                    <div class="new-graph-head text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_DEFECT_CATEGORY' | translate}}
                                            </h3>
                                        </div>
                                        <div class="graph-filter filter-input-group text-center text-sm-right">
                                            <button class="secondary-cta small" (click)="getDefectCategoryListChartExport()" [disabled]="masterModel.defectExportLoading">
												{{'COMMON.LBL_EXPORT' | translate}}</button>
                                        </div>
                                    </div>
                                    <div class="row graph-body">
                                        <div class="col-md-12 col-lg-12 col-xl-6 mb-3 mb-xl-0">
                                            <div id="halfdonutchart" style="width: 100%; height: 200px"></div>
                                        </div>
                                        <div class="col-md-12 col-lg-12 col-xl-6 vertical-center">
                                            <div class="legend-wrapper two-column">
                                                <div class="legend-item" *ngFor="let item of masterModel.defectCategoryList | slice : 0 : masterModel.defectCategoryDataLengthTrim;">
                                                    <div class="label">
                                                        <span class="tile" [ngStyle]="{'background-color': item.color}"></span>
                                                        <span class="text common-tooltip" [attr.data-tooltip]="item.name">{{item.categoryName}}</span>
                                                    </div>
                                                    <span class="count">{{item.defectCountByCategory}}</span>
                                                </div>
                                                <div class="legend-item" *ngIf="masterModel.defectCategoryList.length>masterModel.defectCategoryDataLengthTrim">
                                                    <div class="label has-dropdown">
                                                        <span class="link">
															{{ 'COMMON.LBL_SHOW' | translate }}
															{{masterModel.defectCategoryList.length -
															masterModel.defectCategoryDataLengthTrim}}
															{{ 'COMMON.LBL_MORE' | translate }}</span>
                                                        <div class="cta-dropdown top-right min-width-230">
                                                            <div class="legend-wrapper two-column">
                                                                <div class="legend-item" *ngFor="let defectItem of masterModel.defectCategoryList | slice: masterModel.defectCategoryDataLengthTrim : masterModel.defectCategoryList.length;">
                                                                    <div class="label">
                                                                        <span class="tile" [ngStyle]="{'background-color':defectItem.color }">
																		</span><span class="text common-tooltip" [attr.data-tooltip]="defectItem.name">{{defectItem.categoryName}}</span>
                                                                    </div>
                                                                    <span class="count">{{defectItem.defectCountByCategory}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ng-template>
                    </div>
                    <div class="col-lg-6 grid-column col-md-12 mt-3 mt-lg-0">
                        <ng-container *ngIf="masterModel.lineGraphDefectLoading; else DefectGraphResult">
                            <div class="dashboard-graph-container">
                                <div class="new-graph-head defect-wrapper text-center text-sm-left align-items-center">
                                    <div class="graph-title-container">
                                        <h3 class="title">{{'DEFECT_DASHBOARD.LBL_ANALYSIS_CRITICAL_MAJ_MINOR' | translate}}
                                        </h3>
                                    </div>
                                    <div class="graph-filter filter-input-group text-center text-sm-right">
                                        <div class="my-input-group mr-2">
                                            <ng-select *ngIf="(masterModel.yearList!=null && masterModel.yearList.length>0)" [items]="masterModel.yearList" class="small" bindLabel="name" bindValue="id" [clearable]="false" (change)="yearChange($event)" [(ngModel)]="model.innerDefectYearId" placeholder="--- {{ (masterModel.yearList!=null && masterModel.yearList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---">
                                                <ng-template ng-option-tmp let-item="item">
                                                    <div class="text-wrap">{{ item.name }}</div>
                                                </ng-template>
                                            </ng-select>
                                        </div>
                                        <button class="secondary-cta small" *ngIf="masterModel.lineGraphDefectFound" (click)="getDefectLineChartExport()" [disabled]="masterModel.lineGraphDefectExportLoading || masterModel.lineGraphDefectLoading">
											{{'COMMON.LBL_EXPORT' | translate}}</button>
                                    </div>
                                </div>
                                <div class="row graph-body">
                                    <div class="col-sm-4">
                                        <img class="graph-icon" src="assets/images/donut-placeholder.png" alt="graph">
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="legend-wrapper">
                                            <div class="content-container">
                                                <div class="rect width250 animate"></div>
                                                <div class="rect width80 animate"></div>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-template #DefectGraphResult>
                            <div class="dashboard-graph-container">
                                <div class="new-graph-head defect-wrapper text-center text-sm-left align-items-center">
                                    <div class="graph-title-container">
                                        <h3 class="title">{{'DEFECT_DASHBOARD.LBL_ANALYSIS_CRITICAL_MAJ_MINOR' | translate}}
                                        </h3>
                                    </div>
                                    <div class="graph-filter filter-input-group text-center text-sm-right">
                                        <div class="my-input-group mr-2">
                                            <ng-select *ngIf="(masterModel.yearList!=null && masterModel.yearList.length>0)" [items]="masterModel.yearList" class="small" bindLabel="name" bindValue="id" [clearable]="false" (change)="yearChange($event)" [(ngModel)]="model.innerDefectYearId" placeholder="--- {{ (masterModel.yearList!=null && masterModel.yearList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---">
                                                <ng-template ng-option-tmp let-item="item">
                                                    <div class="text-wrap">{{ item.name }}</div>
                                                </ng-template>
                                            </ng-select>
                                        </div>
                                        <button class="secondary-cta small" *ngIf="masterModel.lineGraphDefectFound" (click)="getDefectLineChartExport()" [disabled]="masterModel.lineGraphDefectExportLoading">
											{{'COMMON.LBL_EXPORT' | translate}}</button>
                                    </div>
                                </div>
                                <div class="row graph-body">
                                    <ng-container *ngIf="masterModel.lineGraphDefectFound; else LineGraphResult">
                                        <div class="col-md-12 col-lg-12 col-xl-8 mb-3 mb-xl-0">
                                            <ng-container *ngIf="masterModel.lineGraphLoadingChart">
                                                <div class="loadingChart"></div>
                                            </ng-container>
                                            <div id="chartdiv" style="width: 100%; height: 200px"></div>
                                        </div>
                                        <div class="col-md-12 col-lg-12 col-xl-4 vertical-center">
                                            <div class="legend-wrapper two-column">
                                                <div class="legend-item mb-3" *ngFor="let item of masterModel.lineGraphDefectList">
                                                    <div class="label">
                                                        <span class="tile" [ngStyle]="{'background-color': item.color }">
														</span><span class="text">{{item.defectName}}</span>
                                                    </div>
                                                    <span class="count">{{item.defectYearCount}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-template #LineGraphResult>
                                        <div class="col-md-12 col-lg-12 col-xl-12 mb-3 mb-xl-0">
                                            <div class="error-container" *ngIf="!masterModel.lineGraphDefectFound && !masterModel.lineGraphDefectError">
                                                <img src="assets/images/no-data.svg" alt="" class="thumbnail">
                                                <h4 class="error-title">{{ 'COMMON.LBL_No_ITEM' | translate }}
                                                </h4>
                                                <p class="error-subtitle">{{'COMMON.LBL_NO_DATA_EMPTY' | translate}}</p>
                                            </div>
                                            <div class="error-container" *ngIf="masterModel.lineGraphDefectError">
                                                <img src="assets/images/went-wrong.svg" alt="" class="thumbnail">
                                                <h4 class="error-title">{{ 'ERROR.MSG_ERROR_TITLE' | translate }}</h4>
                                                <p class="error-subtitle">
                                                    {{'DEFECT_DASHBOARD.LBL_UNAUTHORISED_ACCESS' | translate}}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template>
                                </div>
                            </div>
                        </ng-template>
                    </div>
                </div>
                <div class="row customer-dashboard-graph-wrapper full-height-column-wrapper">
                    <div class="col-lg-6 grid-column col-md-12">
                        <ng-container *ngIf="masterModel.countryDefectLoading; else countryResult">
                            <div class="dashboard-graph-container">
                                <div class="row graph-body">
                                    <div class="col-sm-4">
                                        <img class="graph-icon" src="assets/images/donut-placeholder.png" alt="graph">
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="legend-wrapper">
                                            <div class="content-container">
                                                <div class="rect width250 animate"></div>
                                                <div class="rect width80 animate"></div>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-template #countryResult>
                            <div class="error-container" *ngIf="masterModel.countryDefectError; else countryDataFound">
                                <img src="assets/images/went-wrong.svg" alt="" class="thumbnail">
                                <h4 class="error-title">{{ 'ERROR.MSG_ERROR_TITLE' | translate }}</h4>
                                <p class="error-subtitle">
                                    {{'DEFECT_DASHBOARD.LBL_UNAUTHORISED_ACCESS' | translate}}
                                </p>
                            </div>
                            <ng-template #countryDataFound>
                                <div class="error-container dashboard-graph-container" *ngIf="!masterModel.countryDefectFound">
                                    <div class="new-graph-head text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_BORDER_LINE_ANALYSIS' | translate}}
                                            </h3>
                                        </div>
                                    </div>
                                    <img src="assets/images/no-data.svg" alt="" class="thumbnail">
                                    <h4 class="error-title">{{ 'COMMON.LBL_No_ITEM' | translate }}
                                    </h4>
                                    <p class="error-subtitle">{{'COMMON.LBL_NO_DATA_EMPTY' | translate}}</p>
                                </div>
                                <div class="dashboard-graph-container" *ngIf="masterModel.countryDefectFound">
                                    <div class="new-graph-head text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_BORDER_LINE_ANALYSIS' | translate}}
                                            </h3>
                                        </div>
                                        <div class="graph-filter filter-input-group text-center text-sm-right">
                                            <button class="secondary-cta small" (click)="getDefectCountryListExport()" [disabled]="masterModel.countryDefectExportLoading">{{'COMMON.LBL_EXPORT'
												| translate}}</button>

                                        </div>
                                    </div>
                                    <div class="row graph-body">
                                        <div class="col-md-12 col-lg-12 col-xl-8 mb-3 mb-xl-0">
                                            <div id="singlineChart" style="width: 100%; height: 200px"></div>
                                        </div>
                                        <div class="col-md-12 col-lg-12 col-xl-4 vertical-center">
                                            <div class="legend-wrapper two-column">
                                                <div class="legend-item" *ngFor="let item of masterModel.countryDefectList | slice : 0 : masterModel.defectCategoryDataLengthTrim;">
                                                    <div class="label">
                                                        <span class="tile" [ngStyle]="{'background-color': item.color }">
														</span>
                                                        <span class="text common-tooltip" [attr.data-tooltip]="item.name">
															{{item.defectName}}</span>
                                                    </div>
                                                    <span class="count">{{item.count}}</span>
                                                </div>
                                                <div class="legend-item" *ngIf="masterModel.countryDefectList.length>masterModel.defectCategoryDataLengthTrim">
                                                    <div class="label has-dropdown">
                                                        <span class="link">
															{{ 'COMMON.LBL_SHOW' | translate }}
															{{masterModel.countryDefectList.length -
															masterModel.defectCategoryDataLengthTrim}}
															{{ 'COMMON.LBL_MORE' | translate }}</span>
                                                        <div class="cta-dropdown top-right min-width-230">
                                                            <div class="legend-wrapper two-column">
                                                                <div class="legend-item" *ngFor="let item of masterModel.countryDefectList | slice: masterModel.defectCategoryDataLengthTrim : masterModel.countryDefectList.length;">
                                                                    <div class="label">
                                                                        <span class="tile" [ngStyle]="{'background-color':item.color }">
																		</span>
                                                                        <span class="text common-tooltip" [attr.data-tooltip]="item.name">
																			{{item.defectName}}</span>
                                                                    </div>
                                                                    <span class="count">{{item.count}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </ng-template>
                    </div>
                    <div class="col-lg-6 grid-column col-md-12 mt-3 mt-lg-0">
                        <ng-container *ngIf="masterModel.paretoLoading; else paretoResult">
                            <div class="dashboard-graph-container">
                                <div class="row graph-body">
                                    <div class="col-sm-4">
                                        <img class="graph-icon" src="assets/images/donut-placeholder.png" alt="graph">
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="legend-wrapper">
                                            <div class="content-container">
                                                <div class="rect width250 animate"></div>
                                                <div class="rect width80 animate"></div>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                            <div class="legend-item  content-container">
                                                <div class="label">
                                                    <span class="tile"></span><span class="text rect width100 animate"></span>
                                                </div>
                                                <span class="count rect width60 animate"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-template #paretoResult>
                            <div class="error-container" *ngIf="masterModel.paretoError; else paretoDataFound">
                                <img src="assets/images/went-wrong.svg" alt="" class="thumbnail">
                                <h4 class="error-title">{{ 'ERROR.MSG_ERROR_TITLE' | translate }}</h4>
                                <p class="error-subtitle">
                                    {{'DEFECT_DASHBOARD.LBL_UNAUTHORISED_ACCESS' | translate}}
                                </p>
                            </div>
                            <ng-template #paretoDataFound>
                                <div class="error-container dashboard-graph-container" *ngIf="!masterModel.paretoFound">
                                    <div class="new-graph-head text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_PARETO_ANALYSIS' | translate}}
                                            </h3>
                                        </div>
                                    </div>
                                    <img src="assets/images/no-data.svg" alt="" class="thumbnail">
                                    <h4 class="error-title">{{ 'COMMON.LBL_No_ITEM' | translate }}
                                    </h4>
                                    <p class="error-subtitle">{{'COMMON.LBL_NO_DATA_EMPTY' | translate}}</p>
                                    <div class="float-right">
                                        <a (click)="navigateDefectPareto()">{{'COMMON.LBL_VIEW_DETAILS' | translate}}</a>
                                    </div>
                                </div>
                                <div class="dashboard-graph-container" *ngIf="masterModel.paretoFound">
                                    <div class="new-graph-head defect-wrapper text-center text-sm-left align-items-center">
                                        <div class="graph-title-container">
                                            <h3 class="title">{{'DEFECT_DASHBOARD.LBL_PARETO_ANALYSIS' | translate}}
                                            </h3>
                                        </div>
                                        <div class="graph-filter filter-input-group text-center text-sm-right">
                                            <button class="secondary-cta small" (click)="getParetoDefectListExport()" [disabled]="masterModel.paretoExportLoading">{{'COMMON.LBL_EXPORT' |
												translate}}</button>
                                        </div>
                                    </div>
                                    <div class="row graph-body">
                                        <div class="col-md-12 col-lg-12 col-xl-6 mb-3 mb-xl-0">
                                            <div id="piechart" style="width: 100%; height: 200px"></div>
                                        </div>
                                        <div class="col-md-12 col-lg-12 col-xl-6 vertical-center">
                                            <div class="legend-wrapper">
                                                <div class="legend-item" *ngFor="let item of masterModel.paretoList">
                                                    <div class="label">
                                                        <span class="tile" [ngStyle]="{'background-color': item.color }">
														</span><span class="text common-tooltip" [attr.data-tooltip]="item.name">{{item.defectName}}</span>
                                                    </div>
                                                    <span class="count">{{item.defectCount}}</span>
                                                    <span class="percent">{{item.percentage}} %</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="float-right">
                                        <a (click)="navigateDefectPareto()">{{'COMMON.LBL_VIEW_DETAILS' | translate}}</a>
                                    </div>
                                </div>
                            </ng-template>
                        </ng-template>
                    </div>
                </div>
                <div class="row customer-dashboard-graph-wrapper mt-3">
                    <div class="col-lg-12 defect-dashboard-table-wrapper">
                        <div class="dashboard-graph-container">
                            <div class="new-graph-head text-center text-sm-left align-items-center">
                                <div class="graph-title-container">
                                    <h3 class="title">{{'DEFECT_DASHBOARD.LBL_DEFECT_ANALYTICS' | translate}} </h3>
                                </div>
                                <div class="graph-filter filter-input-group text-center text-sm-right" *ngIf="masterModel.lowPerformanceFound">
                                    <button class="secondary-cta small" (click)="getLowPerformanceExport()" [disabled]="masterModel.lowPerformanceExportLoading">
										{{'COMMON.LBL_EXPORT' | translate}}
									</button>
                                </div>
                            </div>
                            <div class="row graph-body">
                                <div class="col-lg-12">
                                    <div class="defects-container">
                                        <div class="switch-container">
                                            <div (click)="clickFactory()" [ngClass]="masterModel.defectTabActive?'switch':'switch active'">
                                                <img src="assets/images/factory.svg" alt=""> {{'DEFECT_DASHBOARD.LBL_TOP' | translate}} {{masterModel.supplierOrFactoryListCount}} {{'DEFECT_DASHBOARD.LBL_FACTORIES' | translate}}
                                            </div>
                                            <div (click)="clickSupplier()" [ngClass]="!masterModel.defectTabActive?'switch':'switch active'">
                                                <img src="assets/images/Customers.svg" alt=""> {{'DEFECT_DASHBOARD.LBL_TOP' | translate}} {{masterModel.supplierOrFactoryListCount}} {{'DEFECT_DASHBOARD.LBL_SUPPLIERS' | translate}}
                                            </div>
                                        </div>
                                        <div class="select-defect">
                                            <div class="selection">
                                                <p>{{'DEFECT_DASHBOARD.LBL_SELECT_DEFECT' | translate}}</p>
                                                <div class="all-defect">
                                                    <ng-select appendTo="body" [items]="masterModel.defectList" [virtualScroll]="true" [loading]="masterModel.defectLoading" bindLabel="name" bindValue="name" placeholder="--- {{ (masterModel.defectList!=null && masterModel.defectList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                                        [typeahead]="masterModel.defectInput" [minTermLength]="3" [(ngModel)]="masterModel.defectPerformanceAnalysis.innerPerformanceFilter.defectName" (scrollToEnd)="getDefectData()" (change)="defectChange($event)"
                                                        #select>
                                                        <ng-template ng-option-tmp let-item="item">
                                                            <div class="text-wrap">{{ item.name }}</div>
                                                        </ng-template>
                                                    </ng-select>
                                                </div>
                                            </div>
                                            <div class="checkbox-container">
                                                <div class="checkbox-button active" *ngFor="let item of masterModel.defectNameList">
                                                    <div class="group">
                                                        <img src="assets/images/Quotation-rejected.svg" alt="" class="quotation">
                                                        <p class="quotation">{{item.name}}</p>
                                                    </div>
                                                    <div class="styled-checkbox-container">
                                                        <input type="checkbox" class="styled-checkbox" id="{{item.id}}" [(ngModel)]="item.checked" (ngModelChange)="defectTypeChange(item)">
                                                        <label for="{{item.id}}"></label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <ng-container *ngIf="masterModel.lowPerformanceLoading; else LowResult">
                                        <div class="dashboard-graph-container">
                                            <div class="row graph-body">
                                                <div class="col-sm-6">
                                                    <div class="legend-wrapper">
                                                        <div class="content-container">
                                                            <div class="rect width250 animate"></div>
                                                            <div class="rect width80 animate"></div>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="legend-wrapper">
                                                        <div class="content-container">
                                                            <div class="rect width250 animate"></div>
                                                            <div class="rect width80 animate"></div>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                        <div class="legend-item  content-container">
                                                            <div class="label">
                                                                <span class="tile"></span><span class="text rect width100 animate"></span>
                                                            </div>
                                                            <span class="count rect width60 animate"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-template #LowResult>
                                        <div class="error-container" *ngIf="masterModel.lowPerformanceError; else LowDataFound">
                                            <img src="assets/images/went-wrong.svg" alt="" class="thumbnail">
                                            <h4 class="error-title">{{ 'ERROR.MSG_ERROR_TITLE' | translate }}</h4>
                                            <p class="error-subtitle">
                                                {{'DEFECT_DASHBOARD.LBL_UNAUTHORISED_ACCESS' | translate}}
                                            </p>
                                        </div>
                                        <ng-template #LowDataFound>
                                            <div class="error-container" *ngIf="!masterModel.lowPerformanceFound">
                                                <img src="assets/images/no-data.svg" alt="" class="thumbnail">
                                                <h4 class="error-title">{{ 'COMMON.LBL_No_ITEM' | translate }}
                                                </h4>
                                                <p class="error-subtitle">{{'COMMON.LBL_NO_DATA_EMPTY' | translate}}</p>
                                            </div>
                                            <div *ngIf="masterModel.lowPerformanceFound">
                                                <p class="table-title" style="margin-bottom:1rem ;">
                                                    {{'DEFECT_DASHBOARD.LBL_SHOWING_THE_LOW_PERFORMING' | translate}} {{masterModel.supplierOrFactoryListCount}} {{masterModel.defectwordFrame }}
                                                </p>
                                            </div>

                                            <div class="table-container rejection-table-container" *ngIf="masterModel.lowPerformanceFound">
                                                <table class="pagination-table bordered no-hover-table">
                                                    <thead>
                                                        <tr>
                                                            <th>{{masterModel.defectTitle }}</th>
                                                            <th *ngIf="masterModel.hideDefectCritical" class="Critical">
                                                                {{'DEFECT_DASHBOARD.LBL_CRITICAL' | translate}}</th>
                                                            <th *ngIf="masterModel.hideDefectMajor" class="Major ">
                                                                {{'DEFECT_DASHBOARD.LBL_MAJOR' | translate}}</th>
                                                            <th *ngIf="masterModel.hideDefectMinor" class="Minor ">
                                                                {{'DEFECT_DASHBOARD.LBL_MINOR' | translate}}</th>
                                                            <th class="text-center">
                                                                {{'DEFECT_DASHBOARD.LBL_TOTAL_DEFECTS' | translate}}
                                                            </th>
                                                            <th class="text-center">
                                                                {{'DEFECT_DASHBOARD.LBL_TOTAL_REPORTS' | translate}}
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let item of masterModel.lowPerformanceList">
                                                            <td>{{item.supOrFactName}}</td>
                                                            <td class="critical-light  red align-space-between" *ngIf="masterModel.hideDefectCritical">
                                                                <ng-container *ngIf="item.critical >0">
                                                                    <div class="align-space-between-td">
                                                                        <span> {{item.critical}}</span>
                                                                        <span> <img
																				src="assets/images/cta-report-grey.svg"
																				(click)="getDefectCountList(item.supOrFactId, defectpopup, masterModel.defectCriticalId)"
																				alt=""></span>
                                                                        <span> <img src="assets/images/gallary.svg"
																				(click)="getDefectPhotoList(item.supOrFactId, imagepopup, masterModel.defectCriticalId)"
																				alt=""></span>
                                                                    </div>
                                                                </ng-container>
                                                            </td>
                                                            <td class="major-light  red " *ngIf="masterModel.hideDefectMajor">

                                                                <ng-container *ngIf="item.major >0">
                                                                    <div class="align-space-between-td">
                                                                        <span> {{item.major}}</span>
                                                                        <span> <img
																				src="assets/images/cta-report-grey.svg"
																				alt=""
																				(click)="getDefectCountList(item.supOrFactId, defectpopup, masterModel.defectMajorId)"></span>
                                                                        <span><img src="assets/images/gallary.svg"
																				(click)="getDefectPhotoList(item.supOrFactId, imagepopup, masterModel.defectMajorId)"
																				alt=""></span>
                                                                    </div>
                                                                </ng-container>
                                                            </td>
                                                            <td class="minor-light  red align-space-between" *ngIf="masterModel.hideDefectMinor">
                                                                <ng-container *ngIf="item.minor > 0">
                                                                    <div class="align-space-between-td">
                                                                        <span> {{item.minor}}</span>
                                                                        <span> <img
																				src="assets/images/cta-report-grey.svg"
																				alt=""
																				(click)="getDefectCountList(item.supOrFactId, defectpopup, masterModel.defectMinorId)"></span>
                                                                        <span><img src="assets/images/gallary.svg"
																				(click)="getDefectPhotoList(item.supOrFactId, imagepopup, masterModel.defectMinorId)"
																				alt=""></span>
                                                                    </div>
                                                                </ng-container>
                                                            </td>
                                                            <td class="text-center">{{item.totalDefect}}</td>
                                                            <!-- <td class="text-center">
																 
																{{item.totalReports}}
															</td> -->
                                                            <td class="text-center">
                                                                <span class="has-dropdown report-image" style="cursor: pointer;position:absolute;">
																	<img src="assets/images/report-details-hover.svg" alt="" class=" mr-2">
																	<ul class="cta-dropdown bottom-left width-140 max-height-250">
																		<li class="no-hover head">
																			<span class="font-weight-bold">{{'REJECTION_DASHBOARD.LBL_REPORT_No' | translate}}</span>
                                                                </li>
                                                                <li *ngFor="let _report of item.defectReportInfo">
                                                                    <a (click)="openReport(_report)" target="_blank"><img src="assets/images/report-details-hover.svg" alt=""><span>#{{_report.reportNo}}</span></a>
                                                                </li>
                                                                </ul>{{item.totalReports}}
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                        </ng-template>
                                    </ng-template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="loader-overlay" *ngIf="masterModel.defectCountLoading">
                <div class="loader-container">
                  <img src="assets/images/reload.svg" alt="">
                  <span>{{'COMMON.LBL_LOADER' | translate}}</span>
                </div>
              </div>

        </div>
    </div>
</div>

<ng-template #defectpopup let-modal>
    <div class="modal-header custom-modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{ 'DEFECT_DASHBOARD.LBL_DEFECT_LIST' | translate }}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
			<span aria-hidden="true">&times;</span>
		</button>
    </div>
    <div class="modal-body custom-modal-body">
        <table class="pagination-table bordered" *ngIf="masterModel.defectCountList && masterModel.defectCountList.length >0">
            <thead>
                <tr>
                    <th>{{'DEFECT_DASHBOARD.LBL_DEFECT_NAME' | translate}}</th>
                    <th>{{'DEFECT_DASHBOARD.LBL_COUNT' | translate}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of masterModel.defectCountList">
                    <td>{{item.defectName}}</td>
                    <td>{{item.count}}</td>
                </tr>
            </tbody>
        </table>
        <!-- <div class="col-sm-12">
			{{}}
		</div> -->
    </div>
    <!-- <div class="modal-body">
		<div class="small-model">
			<h2 class="title">{{ 'DEFECT_DASHBOARD.LBL_DEFECT_LIST' | translate }}</h2>
			<div class="col-md-12">

			</div>
			<div class="col-md-12">
				<table class="pagination-table">
					<thead>
						<tr>
							<th>{{'DEFECT_DASHBOARD.LBL_DEFECT_NAME' | translate}}</th>
							<th>{{'DEFECT_DASHBOARD.LBL_COUNT' | translate}}
							</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let item of masterModel.defectCountList">
							<td>{{item.defectName}}</td>
							<td>{{item.count}}</td>
						</tr>
					</tbody>
				</table>
			</div>
			<button class="primary-cta" (click)="modal.dismiss('Cross click')">{{ 'COMMON.LBL_OK' | translate }}</button>
		</div>
	</div> -->
</ng-template>

<ng-template #imagepopup let-modal>
    <div class="modal-header custom-modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{'DEFECT_DASHBOARD.LBL_DEFECT_IMAGES' | translate}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
			<span aria-hidden="true">&times;</span>
		</button>
    </div>
    <div class="modal-body custom-modal-body">
        <ngx-gallery [options]="masterModel.defectOptions" [images]="masterModel.defectImages"></ngx-gallery>
    </div>
</ng-template>
