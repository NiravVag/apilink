<div class="main-wrapper">
    <div class="wrapper dashboard-wrapper">
        <div class="my-container">
            <div class="master-body">
                <div class="title-container">
                    <div class="header-back-button" *ngIf="!loading">
                        <img src="assets/images/back-red.png" alt="back"
                            (click)="this.return('schedule/schedule-summary');">
                    </div>
                    <h3 class="main-title"> {{ 'SCHEDULE_SUMMARY.LBL_BOOKINGSEARCH' | translate }}</h3>
                </div>
                <div class="content-container schedule-allocation-container">
                    <div class="formPadding">
                        <div class="row">
                            <div class="col-sm-12 booking-detail-container">
                                <img src="assets/images/blue-file.svg" alt="" class="icon">
                                <h4 class="title">Booking Details</h4>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_BOOKINGNO' | translate
                                        }}</label>
                                    <p class="input-value">{{model.bookingNo}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_CUSTOMER' | translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.customerName}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_SUPPLIER' | translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.supplierName}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_FACTORY' | translate }}</label>
                                    <p class="input-value wordbreak">{{model.factoryName}}</p>
                                </div>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{'SCHEDULE_SUMMARY.LBL_SERVICEDATE' |
                                        translate}}</label>
                                    <p class="input-value wordbreak"
                                        *ngIf="model.serviceDateFrom != model.serviceDateTo">
                                        {{model.serviceDateFrom}} <span>To</span> {{model.serviceDateTo}} </p>
                                    <p class="input-value wordbreak"
                                        *ngIf="model.serviceDateFrom == model.serviceDateTo">
                                        {{model.serviceDateFrom}}</p>
                                </div>
                                <div class="my-input-group col-lg-3 padding-left tablet-padding-left">
                                    <label class="light" for="">{{ 'EDIT_BOOKING.LBL_TOTAL_SAMPLING_SIZE' | translate
                                        }}</label>
                                    <p class="input-value">
                                        <strong>{{model.totalSampleSize}}</strong>
                                    </p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_TOTAL_COMBINE_COUNT' |
                                        translate }}
                                        <span *ngIf="model.totalContainers>0">
                                            {{ 'SCHEDULE_SUMMARY.LBL_CONTAINERS' | translate }}</span>
                                    </label>
                                    <p class="input-value wordbreak">{{model.totalReports}}/ {{model.totalProduct}}/
                                        {{model.totalCombineCount}}
                                        <span *ngIf="model.totalContainers>0">
                                            /{{model.totalContainers}}</span>
                                    </p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_SERVICETYPE' | translate
                                        }}</label>
                                    <p class="input-value">{{model.serviceType}}</p>
                                </div>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'EDIT_AUDIT.LBL_FACT_Location' | translate }}</label>
                                    <p class="input-value wordbreak">{{model.countryName}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_FACTORY_ADDRESS' | translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.factoryAddress}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_TRAVEL_ACTUAL_ESTIMATED_MANDAY'
                                        | translate }}</label>
                                    <p class="input-value wordbreak">{{model.quotationManDay}}/ {{model.actualManday}}/
                                        {{model.travelManday}}
                                    </p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'EDIT_BOOKING.LBL_PREVBOOKINGNO' | translate
                                        }}</label>
                                    <span *ngFor="let prevNo of model.previousBookingNo; let isLast=last"><a
                                            triggers="mouseenter:mouseleave" style="display: inline;"><span
                                                (click)="RedirectToEdit(prevNo)" style="color: blue;"
                                                class="input-value wordbreak">#{{prevNo}}</span></a>{{isLast ? '' : ',
                                        '}}
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_PRODUCT_CATEGORY' | translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.productCategory}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_PRODUCT_SUB_CATEGORY' |
                                        translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.productSubCategory}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_PRODUCT_SUB_CATEGORY_TWO' |
                                        translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.productSubCategory2}}</p>
                                </div>
                                <div class="my-input-group col-lg-3">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_SUGGESTED_MD' |
                                        translate
                                        }}</label>
                                    <p class="input-value wordbreak">{{model.suggestedManday}}</p>
                                </div>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">
                                <div class="my-input-group padding-left tablet-padding-left">
                                    <label class="light" for="">{{ 'SCHEDULE_SUMMARY.LBL_BOOKINGCOMMENTS' | translate
                                        }}</label>
                                    <p class="input-value">
                                        <strong>{{model.bookingComments}}</strong>
                                    </p>
                                </div>
                            </div>
                            <div class="col-sm-12 marginTop20 detail-column-container">

                            </div>
                        </div>
                    </div>
                    <div class="formPadding allocation-container"
                        *ngFor="let item of staffAllocationValidator; let parentIndex = index">
                        <div class="row">
                            <div class="col-6 col-sm-6">
                                <h4 class="title">{{item.tabItem.serviceDate | date:'dd/MM/yyyy'}}</h4>
                            </div>
                            <div class="col-6 col-sm-6 text-right" *ngIf="parentIndex == 0 && showRepeatButton">
                                <button class="secondary-cta small" (click)="repeatData()">Repeat to all dates</button>
                            </div>
                        </div>
                        <div class="row marginTop25">
                            <div class="col-sm-4 col-md-12 col-lg-12 col-xl-4">
                                <div class="allocation-details">
                                    <p class="detail-title">{{'QUOTATION.LBL_MANDAY' | translate}}</p>
                                    <div class="my-input-group">
                                        <label for="" class="light">{{'SCHEDULE_SUMMARY.LBL_ESTIMATED' |
                                            translate}}</label>
                                        <p class="input-value">{{item.tabItem.manDay}}</p>
                                    </div>
                                    <div class="my-input-group" [ngClass]="{'text-center': parentIndex != 0}">
                                        <label for="" class="light">{{'SCHEDULE_SUMMARY.LBL_ACTUAL' |
                                            translate}}</label>
                                        <p class="input-value">{{item.tabItem.actualManDay}}</p>
                                        <!-- <img src="assets/images/process.svg" class="loading" alt="" *ngIf="parentIndex != 0"> -->
                                    </div>
                                    <div class="my-input-group">
                                        <label for="" class="light">{{'SCHEDULE_SUMMARY.LBL_AVAILABLE' |
                                            translate}}</label>
                                        <p class="input-value">{{item.tabItem.availableManDay}}</p>
                                    </div>
                                </div>
                                <div class="row marginTop15">
                                    <div class="col-sm-6 col-md-6 col-lg-3 marginTop15 mobile-margin-top-15">
                                        <div class="styled-checkbox-container" style="width:260px;">
                                            <input class="styled-checkbox" id="checkboxQc-{{parentIndex}}"
                                                type="checkbox" [(ngModel)]="item.tabItem.isQcVisibility">
                                            <label for="checkboxQc-{{parentIndex}}"
                                                style="display: inline-block;color: black;">
                                                {{'SCHEDULE_SUMMARY.LBL_QC_VISIBLE' | translate}}</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-4 col-md-12 col-lg-12 col-xl-4 marginTop15">
                                        <div class="my-input-group" style="width:220px;">
                                            <label for="" class="light"
                                                style="padding-bottom: 10px;">{{'SCHEDULE_SUMMARY.LBL_QC_LEADER' |
                                                translate}}</label>

                                            <ng-select [items]="item.tabItem.QC" [multiple]="false"
                                                [closeOnSelect]="true" [searchable]="true" bindLabel="staffName"
                                                bindValue="staffID" appendTo="body" [clearable]="true"
                                                placeholder="--- {{ 'CUSTOMER_PRODUCT_SUMMARY.LBL_SELECT' | translate }} ---"
                                                (change)="assignQCLeader(item.tabItem.QC, $event)"
                                                [(ngModel)]="item.tabItem.leaderId">
                                                <ng-template ng-option-tmp let-item="item">
                                                    <div class="text-wrap">{{ item.staffName }}</div>
                                                </ng-template>
                                            </ng-select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4 col-md-12 col-lg-12 col-xl-4 marginTop15">
                                        <div class="my-input-group" style="width:220px">
                                            <label for="" class="light"
                                                style="padding-bottom: 10px;">{{'SCHEDULE_SUMMARY.LBL_REMARKS' |
                                                translate}}</label>
                                            <p class="input-value common">{{item.tabItem.remarks}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-8 col-md-12 col-lg-12 col-xl-8 tablet-margin-top-30">
                                <div class="row">
                                    <div class="col-sm-4 mobile-margin-top-30">
                                        <div class="allocation-trigger-container" *ngIf="!item.tabItem.QC.length"
                                            (click)="openLG(qcModel, parentIndex, 'Inspector')" #bm>
                                            <p class="trigger-title">{{'SCHEDULE_SUMMARY.LBL_QC' | translate}}</p>
                                            <p class="trigger-subtitle">{{'SCHEDULE_SUMMARY.MSG_SELECT' | translate}}
                                            </p>
                                        </div>
                                        <div class="allocated-container" *ngIf="item.tabItem.QC.length">
                                            <p class="allocated-title">{{'SCHEDULE_SUMMARY.LBL_QC' | translate}} - <span
                                                    class="schtext-bold">{{item.tabItem.QC.length}}</span>
                                                <a [routerLink]="" class="primary float-right d-inline"
                                                    (click)="openLG(qcModel, parentIndex, 'Inspector')" #bm>+ Add
                                                    more</a>
                                            </p>
                                            <div class="scrollable-area" style="max-height: 260px; overflow-y: auto;">
                                                <div class="allocation-user-card"
                                                    *ngFor="let user of item.tabItem.QC; let ind = index">
                                                    <img src="assets/images/red-close-thick.svg" alt="" class="close"
                                                        (click)="removeUser(parentIndex, 'qc', user)">
                                                    <img [src]="photourl" alt="user" class="thumbnail">
                                                    <div class="info">
                                                        <ng-template #qcpopContent>
                                                            <div class="popoverScroll">
                                                                <div style="width: 200px;">
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_EMAIL'
                                                                        | translate}}</span>
                                                                    <div>{{user.emailAddress}}</div>
                                                                    <br>
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_PHONE'
                                                                        | translate}}</span>
                                                                    <div>{{user.emergencyCall}}</div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <p class="title">
                                                            <a class="tooltiplink" [ngbPopover]="qcpopContent"
                                                                placement="right" container="body"
                                                                [autoClose]="'outside'" [popoverTitle]="user.staffName">
                                                                {{user.staffName}}
                                                            </a>
                                                            <img class="verified" src="assets/images/verified.svg"
                                                                alt="" *ngIf="user.employeeType == _EmployeeType">
                                                        </p>
                                                        <p class="subtitle">{{user.location}}</p>
                                                        <p class="subtitle" *ngIf="user.assignedBookingCount > 0">
                                                            {{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate}}
                                                            {{user.assignedBookingCount}} <span>
                                                                {{user.bookingsAssigned}}</span></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 mobile-margin-top-30">
                                        <div class="allocation-trigger-container grey"
                                            *ngIf="!item.tabItem.additionalQC.length"
                                            (click)="openLG(additionalQcModel, parentIndex, 'Inspector')" #bm>
                                            <p class="trigger-title">{{'SCHEDULE_SUMMARY.LBL_ADDITIONALQC' | translate}}
                                            </p>
                                            <p class="trigger-subtitle">{{'SCHEDULE_SUMMARY.MSG_SELECT' | translate}}
                                            </p>
                                        </div>
                                        <div class="allocated-container" *ngIf="item.tabItem.additionalQC.length">
                                            <p class="allocated-title">
                                                {{'SCHEDULE_SUMMARY.LBL_ADDITIONALQC' | translate}} - <span
                                                    class="schtext-bold">{{item.tabItem.additionalQC.length}}</span>
                                                <a [routerLink]="" class="primary float-right d-inline"
                                                    (click)="openLG(additionalQcModel, parentIndex, 'Inspector')" #bm>+
                                                    Add
                                                    more</a>
                                            </p>
                                            <div class="scrollable-area" style="max-height: 260px; overflow-y: auto;">
                                                <div class="allocation-user-card"
                                                    *ngFor="let user of item.tabItem.additionalQC">
                                                    <img src="assets/images/red-close-thick.svg" alt="" class="close"
                                                        (click)="removeAddQC(parentIndex, 'additionalQc', user)">
                                                    <img [src]="photourl" alt="user" class="thumbnail">
                                                    <div class="info">
                                                        <ng-template #qcpopContent>
                                                            <div class="popoverScroll">
                                                                <div style="width: 200px;">
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_EMAIL'
                                                                        | translate}}</span>
                                                                    <div>{{user.emailAddress}}</div>
                                                                    <br>
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_PHONE'
                                                                        | translate}}</span>
                                                                    <div>{{user.emergencyCall}}</div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <p class="title"><a class="tooltiplink"
                                                                [ngbPopover]="qcpopContent" placement="right"
                                                                container="body" [autoClose]="'outside'"
                                                                [popoverTitle]="user.staffName">
                                                                {{user.staffName}}
                                                            </a>
                                                            <img class="verified" src="assets/images/verified.svg"
                                                                alt="" *ngIf="user.employeeType == _EmployeeType">
                                                        </p>
                                                        <p class="subtitle">{{user.location}}</p>
                                                        <ng-template #addqcbookingassignedpopContent>
                                                            <div class="popoverScroll">
                                                                <div style="width: 250px;">
                                                                    <div>{{user.bookingsAssigned}}</div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <p class="subtitle"
                                                            *ngIf="user.assignedBookingCount > 0 && user.assignedBookingCount > 2">
                                                            <a class="tooltiplink"
                                                                [ngbPopover]="addqcbookingassignedpopContent"
                                                                placement="left" container="body"
                                                                [autoClose]="'outside'"
                                                                popoverTitle="{{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate }}">
                                                                {{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate}}
                                                                {{user.assignedBookingCount}}
                                                                <span>{{user.bookingsAssignedShow}}</span>
                                                            </a>
                                                        </p>
                                                        <p class="subtitle"
                                                            *ngIf="user.assignedBookingCount > 0 && user.assignedBookingCount<=2">
                                                            {{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate}}
                                                            {{user.assignedBookingCount}} <span>
                                                                {{user.bookingsAssignedShow}}</span></p>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 mobile-margin-top-30">
                                        <div class="allocation-trigger-container" *ngIf="!item.tabItem.CS.length"
                                            (click)="openLG(csModel, parentIndex, 'ReportChecker')" #bm>
                                            <p class="trigger-title">
                                                {{'SCHEDULE_SUMMARY.LBL_REPORT_CHECKER' | translate}}</p>
                                            <p class="trigger-subtitle">{{'SCHEDULE_SUMMARY.MSG_SELECT' | translate}}
                                            </p>
                                        </div>
                                        <div class="allocated-container" *ngIf="item.tabItem.CS.length">
                                            <p class="allocated-title">
                                                {{'SCHEDULE_SUMMARY.LBL_REPORT_CHECKER' | translate}} - <span
                                                    class="schtext-bold">{{item.tabItem.CS.length}}</span>
                                                <a [routerLink]="" class="primary float-right d-inline"
                                                    (click)="openLG(csModel, parentIndex, 'ReportChecker')" #bm>+
                                                    Add more</a>
                                            </p>
                                            <div class="scrollable-area" style="max-height: 260px; overflow-y: auto;">
                                                <div class="allocation-user-card"
                                                    *ngFor="let user of item.tabItem.CS; let i = index">
                                                    <img src="assets/images/red-close-thick.svg" alt="" class="close"
                                                        (click)="removeAddCS(parentIndex, 'reportChecker', user)">
                                                    <img [src]="photourl" alt="user" class="thumbnail">
                                                    <div class="info">
                                                        <ng-template #qcpopContent>
                                                            <div class="popoverScroll">
                                                                <div style="width: 200px;">
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_EMAIL'
                                                                        | translate}}</span>
                                                                    <div>{{user.emailAddress}}</div>
                                                                    <br>
                                                                    <span
                                                                        class="textfont-bold">{{'SCHEDULE_SUMMARY.LBL_PHONE'
                                                                        | translate}}</span>
                                                                    <div>{{user.emergencyCall}}</div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <p class="title"><a class="tooltiplink"
                                                                [ngbPopover]="qcpopContent" placement="left"
                                                                container="body" [autoClose]="'outside'"
                                                                [popoverTitle]="user.staffName">
                                                                {{user.staffName}}
                                                            </a>
                                                            <img class="verified" src="assets/images/verified.svg"
                                                                alt="" *ngIf="user.employeeType == _EmployeeType">
                                                        </p>
                                                        <p class="subtitle">{{user.location}}</p>
                                                        <!-- <ng-template #rcbookingassignedpopContent>
                                                            <div class="popoverScroll">
                                                                <div style="width: 250px;">
                                                                    <div>{{user.bookingsAssigned}}</div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <p class="subtitle"
                                                            *ngIf="user.assignedBookingCount > 0 && user.assignedBookingCount > 2">
                                                            <a class="tooltiplink"
                                                                [ngbPopover]="rcbookingassignedpopContent"
                                                                placement="left" container="body"
                                                                [autoClose]="'outside'"
                                                                popoverTitle="{{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate }} {{user.assignedBookingCount}} ">
                                                                {{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate}}
                                                                {{user.assignedBookingCount}}
                                                                <span>{{user.bookingsAssignedShow}}</span>
                                                            </a>
                                                        </p>

                                                        <p class="subtitle"
                                                            *ngIf="user.assignedBookingCount > 0 && user.assignedBookingCount<=2">
                                                            {{'SCHEDULE_SUMMARY.LBL_ASSIGNED' | translate}}
                                                            {{user.assignedBookingCount}} <span>
                                                                {{user.bookingsAssignedShow}}</span></p> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row" *ngIf="item.tabItem.qcAutoExpenses.length>0">
                                    <div class="quotation-search-container">
                                        <div class="table-container h-scroll table-max-height-400">
                                            <table class="pagination-table simple-table bordered">
                                                <thead>
                                                    <tr class="sticky-top-row">
                                                        <th>{{'SCHEDULE_SUMMARY.LBL_Travel_QcName' | translate}}</th>
                                                        <th>{{'SCHEDULE_SUMMARY.LBL_Travel_StartPort' | translate}}</th>
                                                        <th>{{'SCHEDULE_SUMMARY.LBL_Travel_FactoryTown' | translate}}
                                                        </th>
                                                        <th>{{'SCHEDULE_SUMMARY.LBL_Travel_TripType' | translate}}</th>
                                                        <th>{{'SCHEDULE_SUMMARY.LBL_Travel_Comments' | translate}}</th>
                                                        <th *ngIf="false">{{'SCHEDULE_SUMMARY.LBL_EDIT' | translate}}</th>
                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <ng-container *ngFor="let expense of item.tabItem.qcAutoExpenses">
                                                        <tr>
                                                            <td>{{expense.qcName}}</td>
                                                            <td>{{expense.startPortName}}</td>
                                                            <td>{{expense.factoryTownName}}</td>
                                                            <td>

                                                                <div class="my-input-group">
                                                                    <ng-select [loading]="tripTypeLoading"
                                                                        [hideSelected]="true" appendTo="body"
                                                                        placeholder="--- {{ 'TOWN_SUMMARY.LBL_SELECT' | translate }} ---"
                                                                        [items]="tripTypeList"
                                                                        [(ngModel)]="expense.tripTypeId"
                                                                        [disabled]="expense.expenseStatus!=null && expense.expenseStatus!=1"
                                                                        bindLabel="name" bindValue="id"
                                                                        [closeOnSelect]="true" [multiple]="false"
                                                                        [searchable]="false"></ng-select>
                                                                </div>

                                                            </td>
                                                            <td>
                                                                <input type="text" placeholder="Comments"
                                                                    [readonly]="expense.expenseStatus!=null && expense.expenseStatus!=1"
                                                                    [(ngModel)]="expense.comments">
                                                            </td>
                                                            <td text-align="center" *ngIf="false">
                                                                <a *ngIf="expense.expenseStatus==null || expense.expenseStatus==1" 
                                                                    [routerLink]="" class="primary d-inline"
                                                                    (click)="openEditExpensePopup(expenseModal, expense)">Edit</a>
                                                            </td>
                                                        </tr>
                                                    </ng-container>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>


                            </div>
                        </div>
                    </div>
                    <div class="content-container schedule-allocation-container">
                        <div class="padding col-sm-12 scroll-x">
                            <!-- <div class="my-input-group">
								<label for=""><h4>{{ 'SCHEDULE_SUMMARY.LBL_COMMENT' | translate }}</h4></label>
								<textarea [(ngModel)]="model.comment"></textarea>
							</div> -->
                            <div class="col-sm-12 booking-detail-container my-input-group">
                                <label>
                                    <h4 class="title">{{ 'SCHEDULE_SUMMARY.LBL_COMMENT' | translate }}</h4>
                                </label>
                                <textarea [(ngModel)]="model.comment"></textarea>
                            </div>

                            <div class="form-action-container my-input-group" *ngIf="showSaveButton">
                                <button class="primary-cta small" (click)="openPopUp(contentPopup);"
                                    [disabled]="loading">
                                    {{'EDIT_SUPPLIER.LBL_SAVE' | translate }}
                                    <span *ngIf="loading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="loader-overlay" *ngIf="loading" [ngStyle]="{'z-index': '60'}">
    <div class="loader-container">
        <img src="assets/images/reload.svg" alt="">
        <span>{{'COMMON.LBL_LOADER' | translate}}</span>
    </div>
</div>
<ng-template #contentPopup let-modal id="template1">
    <div class="modal-body">
        <div class="small-model">
            <h2 class="title">{{ 'SCHEDULE_SUMMARY.MSG_QC' | translate }}</h2>
            <p>{{ 'SCHEDULE_SUMMARY.MSG_CONFRMCONTINUE' | translate }}</p>
            <button class="secondary-cta" (click)="modal.dismiss('Cross click')">{{ 'COMMON.LBL_CONFIRMCANCEL' |
                translate }}</button>
            <button class="primary-cta" (click)="save();">{{ 'COMMON.LBL_OK' | translate }}</button>
        </div>
    </div>
</ng-template>
<ng-template #fbStatusPopup let-modal>
    <div class="modal-body">
        <div class="small-model">
            <h2 class="title">{{'COMMON.LBL_FB_ERROR' | translate }}</h2>

            <p *ngFor="let status of fbErrorMessage">{{ status }}</p>

            <button class="secondary-cta" (click)="modal.dismiss('Cross click');">{{ 'COMMON.LBL_CONFIRMCANCEL' |
                translate }}
            </button>
        </div>
    </div>
</ng-template>

<ng-template #schedulingStatus let-modal>
    <div class="modal-body">
        <div class="small-model">
            <h2 class="title">{{ 'SCHEDULE_SUMMARY.TITLE' | translate }}</h2>
            <p></p>
            <p>#{{model.bookingNo}} {{ 'SCHEDULE_SUMMARY.MSG_USER_ACCESS_BOOKING' | translate }}</p>
            <p></p>

            <button class="primary-cta" (click)="reloadScheduleSummary();">{{ 'SCHEDULE_SUMMARY.BTN_RELOAD' | translate
                }}
            </button>
        </div>
    </div>
</ng-template>

<ng-template #staffNotAvailablePopUp let-modal>
    <div class="modal-body">
        <div class="small-model">
            <h3 class="title">{{'SCHEDULE_SUMMARY.UNAVAILABLE_STAFF' | translate }}</h3>
            <div class="table-container marginTop20">
                <table class="pagination-table">
                    <thead>
                        <tr>
                            <th class="width-260">{{'SCHEDULE_SUMMARY.LBL_SERVICEDATE' | translate}}</th>
                            <th class="width-260">{{'SCHEDULE_SUMMARY.LBL_QC' | translate}}</th>
                            <th class="width-260">{{'SCHEDULE_SUMMARY.LBL_REPORT_CHECKER' | translate}}</th>
                        </tr>
                    </thead>
                    <tbody *ngFor="let item of staffUnavailable">
                        <tr>
                            <td class="width-260" *ngIf="item.QCList != null || item.CSList != null">
                                {{item.serviceDate | date:'dd/MM/yyyy'}}</td>
                            <td class="width-260 wordbreak">{{item.QCList}}</td>
                            <td class="width-260 wordbreak">{{item.CSList}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="marginTop20">
                <button class="secondary-cta" (click)="modal.dismiss('Cross click');">{{ 'COMMON.LBL_CONFIRMCANCEL' |
                    translate }}
                </button>
            </div>
        </div>
    </div>
</ng-template>


<ng-template #expenseModal let-modal>
    <div class="modal-header custom-modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{'SCHEDULE_SUMMARY.LBL_Travel_Expense' | translate}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body custom-modal-body">

        <div class="row">

            <div class="col-sm-4 mobile-margin-top-15">
                <div class="my-input-group">
                    <label class="control-label">{{'SCHEDULE_SUMMARY.LBL_Travel_StartPort' | translate}}</label>

                    <ng-select appendTo="body" [items]="startPortList" [virtualScroll]="true" appendTo="body"
                        [loading]="startPortLoading" bindLabel="name"
                        placeholder="--- {{ (startPortList!=null && startPortList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                        [typeahead]="startPortInput" [minTermLength]="3" [(ngModel)]="qcAutoExpense.starPortData"
                        [multiple]="false" (clear)="clearStartPort()" (scrollToEnd)="getStartPortData()" #select>
                        <ng-template ng-option-tmp let-item="item">
                            <div class="text-wrap"><span>{{item.name}}</span></div>
                        </ng-template>
                    </ng-select>
                </div>

            </div>

            <div class="col-sm-4 mobile-margin-top-15">
                <div class="my-input-group">
                    <label class="control-label">{{ 'EDIT_TRAVEL_TARIFF.LBL_TOWN' | translate }}</label>
                    <ng-select appendTo="body" [items]="townList" [virtualScroll]="true" appendTo="body"
                        [loading]="townLoading" bindLabel="name"
                        placeholder="--- {{ (townList!=null && townList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                        [typeahead]="townInput" [minTermLength]="3" [(ngModel)]="qcAutoExpense.townData"
                        [multiple]="false" (clear)="clearTown()" (scrollToEnd)="getTownData()" #select>
                        <ng-template ng-option-tmp let-item="item">
                            <div class="text-wrap"><span>{{item.name}}</span></div>
                        </ng-template>
                    </ng-select>
                </div>

            </div>



        </div>

        <div class="modal-footer">
            <button type="button" class="primary-cta small" (click)="modal.dismiss('apply')">
                {{ 'BOOKING_COMBINEORDERS.LBL_AQL_APPLY' | translate }}
            </button>
            <button type="button" class="secondary-cta small" (click)="modal.dismiss('cancel')">
                {{ 'BOOKING_COMBINEORDERS.LBL_AQL_CANCEL' | translate }}
            </button>
        </div>
    </div>

</ng-template>

<ng-template #TravelExpenseModal let-modal>
    <div class="modal-header custom-modal-header">
        <h4 class="modal-title" id="modal-basic-title">{{'SCHEDULE_SUMMARY.LBL_Travel_Expense' | translate}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body custom-modal-body">
        <div class="row" *ngIf="duplicateTravelAllowance.length>0">

            <p>Following are the travel expense already configured.</p>

            <div class="quotation-search-container">
                <div class="table-container h-scroll table-max-height-400">
                    <table class="pagination-table simple-table bordered">
                        <thead>
                            <tr class="sticky-top-row">
                                <th>{{'SCHEDULE_SUMMARY.LBL_Travel_QcName' | translate}}</th>
                                <th>{{'SCHEDULE_SUMMARY.LBL_Travel_BookingNo' | translate}}</th>
                                <th>{{'SCHEDULE_SUMMARY.LBL_Travel_ServiceDate' | translate}}</th>
                                <th>{{'SCHEDULE_SUMMARY.LBL_Travel_StartPort' | translate}}</th>
                                <th>{{'SCHEDULE_SUMMARY.LBL_Travel_FactoryTown' | translate}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let itemData of duplicateTravelAllowance">
                                <tr>
                                    <td>{{itemData.qcName}}</td>
                                    <td><a [routerLink]="" class="primary d-inline"
                                            (click)="viewScheduleBooking(itemData.bookingId)">{{itemData.bookingId}}</a>
                                    </td>
                                    <td>{{itemData.serviceDate}}</td>
                                    <td>{{itemData.startPort}}</td>
                                    <td>{{itemData.factoryTown}}</td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</ng-template>


<ng-template #qcModel let-modal>
    <div class="modal-body header-small-modal">
        <div class="small-model">
            <div class="body new-padding">
                <div class="approve-modal-container">
                    <h4 class="modal-title marginBottom24">
                        {{'SCHEDULE_SUMMARY.LBL_ASSIGN_QC' | translate}}
                        <img src="assets/images/black-close.svg" alt="close" class="close"
                            (click)="searchText = null; modal.dismiss('Cross click')">
                    </h4>
                    <div class="qc-filter-container marginBottom10">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_OFFICE'|translate}}</label>
                                    <ng-select bindLabel="name" (change)="onChangeOffice($event)"
                                        [items]="masterModel.officeList"
                                        [(ngModel)]="masterModel.staffSearchDataSource.officeId" bindValue="id"
                                        [clearable]="true"
                                        placeholder="--- {{ (masterModel.officeList!=null && masterModel.officeList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_ENTITY'|translate}}</label>
                                    <ng-select bindLabel="name" [items]="masterModel.entityList" disabled
                                        [(ngModel)]="masterModel.staffSearchDataSource.entityId" bindValue="id"
                                        [clearable]="true"
                                        placeholder="--- {{ (masterModel.entityList!=null && masterModel.entityList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_EMPLOYEE_TYPE' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.employeeType"
                                        (change)="onChangeEmployeeType()" [items]=" masterModel.employeeTypeList"
                                        bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.employeeTypeList!=null && masterModel.employeeTypeList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                        <div class="row marginTop15" *ngIf="toggleQCFilterSection">
                            <div class="col-sm-4 col-lg-4"
                                *ngIf="masterModel.staffSearchDataSource.employeeType===masterModel._EmployeeType.Outsource">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_OUTSOURCE_COMPANY' | translate}}</label>
                                    <ng-select [searchable]="true" [loading]="masterModel.outSourceCompanyLoading"
                                        [clearable]="true" [items]="masterModel.outSourceCompanyList" appendTo="body"
                                        bindLabel="name" bindValue="id" [hideSelected]="true"
                                        placeholder="--- {{(masterModel.outSourceCompanyList!=null && masterModel.outSourceCompanyList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA')  | translate }} ---"
                                        [(ngModel)]="masterModel.staffSearchDataSource.outSourceCompany">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_START_PORT' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.startPortId"
                                        [loading]="masterModel.startPortLoading" [items]=" masterModel.startPortList"
                                        placeholder="--- {{ (masterModel.startPortList!=null && masterModel.startPortList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        bindValue="id" [clearable]="true" appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_ZONE' | translate}}</label>
                                    <ng-select [items]="masterModel.zoneList" bindLabel="name" bindValue="id"
                                        [loading]="masterModel.zoneLoading" [virtualScroll]="true"
                                        placeholder="--- {{ (masterModel.zoneList!=null && masterModel.zoneList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        [clearable]="true" appendTo="body" [typeahead]="masterModel.zoneInput"
                                        [(ngModel)]="masterModel.staffSearchDataSource.zoneId"
                                        (scrollToEnd)="getZoneData(true)" #select></ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4"
                                [ngClass]="{'marginTop15':masterModel.staffSearchDataSource.employeeType===masterModel._EmployeeType.Outsource}">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_MARKET_SEGMENT' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.marketSegmentId"
                                        [loading]="masterModel.marketSegmentLoading"
                                        [items]=" masterModel.marketSegmentList" bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.marketSegmentList!=null && masterModel.marketSegmentList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4 marginTop15">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_PRODUCT_CATEGORY' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.productCategoryId"
                                        [loading]="masterModel.productCategoryLoading"
                                        [items]=" masterModel.productCategoryList" bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.productCategoryList!=null && masterModel.productCategoryList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4 marginTop15">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_EXPERTISE' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.expertiseId"
                                        [loading]="masterModel.expertiseLoading" [items]=" masterModel.expertiseList"
                                        bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.expertiseList!=null && masterModel.expertiseList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="advanced-search marginBottom24 w-100">
                        <div class="row">
                            <div class="col-12 col-sm-6">
                                <div class="advanced-search marginBottom24" (click)="toggleQCFilter()">
                                    <img class="icon" src="assets/images/expand-new.svg" *ngIf="!toggleQCFilterSection"
                                        alt="">
                                    <img class="icon" src="assets/images/collapse-new.svg" *ngIf="toggleQCFilterSection"
                                        alt=""> {{'COMMON.LBL_ADVANCED_SEARCH' | translate}}
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 mt-1 text-right">
                                <button class="category-cta small mr-2 common-tooltip common-tooltip-top-2"
                                    data-tooltip="Reset" [disabled]="masterModel.qcSearchLoading"
                                    (click)="resetQCFilter('Inspector')">
                                    <img src="assets/images/reload-new.svg" alt="Reset">
                                    <span>{{ 'COMMON.LBL_RESET' | translate}}</span>
                                </button>
                                <button id="btnSearch" [disabled]="masterModel.qcSearchLoading"
                                    class="primary-cta small" (click)="filterQC('Inspector')">
                                    {{'COMMON.LBL_SEARCH' | translate}}
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-lg-8 col-sm-12">
                            <ng-select [items]="currentList.QCList" class="multiple" [multiple]="true"
                                [searchable]="true" [typeahead]="masterModel.staffInput"
                                [loading]="masterModel.staffLoading" [closeOnSelect]="false" [minTermLength]="3"
                                bindLabel="staffName" (clear)="clearStaff('Inspector')" [virtualScroll]="true"
                                (scrollToEnd)="getStaffData(masterModel.staffAllocationType.QC)"
                                [(ngModel)]="allocatedQC" placeholder="Select QC" appendTo="body">
                                <ng-template ng-label-tmp let-item="item">
                                    <img class="ng-value-thumb" [src]="photourl" alt="">
                                    <span class="ng-value-label">{{item.staffName}}</span>
                                    <span class="ng-value-icon right" (click)="removeQC(item)" aria-hidden="true"><img
                                            src="assets/images/new-set/close-ng-select.svg" alt=""></span>
                                </ng-template>
                                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                    <div class="d-flex align-items-center">
                                        <div class="ng-dropdown-user-card">
                                            <img [src]="photourl" alt="">
                                            <div class="user-info">
                                                <div class="name">
                                                    {{item.staffName}}
                                                    <img alt="" class="verified" src="assets/images/verified.svg">
                                                </div>
                                                <div class="desc">{{item.location}}</div>
                                            </div>
                                        </div>
                                        <div class="styled-checkbox-container">
                                            <input class="styled-checkbox" id="item-{{index}}" type="checkbox"
                                                [ngModel]="item$.selected">
                                            <label for="checkbox-2"></label>
                                        </div>
                                    </div>
                                </ng-template>
                            </ng-select>
                        </div>
                        <div class="col-md-4 col-lg-4 col-sm-12" *ngIf="allocatedQC.length>0">
                            <div class="marginTop20">
                                <button class="primary-cta small" [disabled]="masterModel.qcSearchLoading"
                                    (click)="addMore(masterModel.staffAllocationType.QC)">Apply
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>


<ng-template #additionalQcModel let-modal>
    <div class="modal-body header-small-modal">
        <div class="small-model">
            <div class="body new-padding">
                <div class="approve-modal-container">
                    <h4 class="modal-title marginBottom24">
                        {{'SCHEDULE_SUMMARY.LBL_ASSIGN_ADDIDTIONALQC' | translate}}
                        <img src="assets/images/black-close.svg" alt="close" class="close"
                            (click)="searchText = null; modal.dismiss('Cross click')">
                    </h4>
                    <div class="qc-filter-container marginBottom10">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_OFFICE'|translate}}</label>
                                    <ng-select bindLabel="name" (change)="onChangeOffice($event)"
                                        [items]="masterModel.officeList"
                                        [(ngModel)]="masterModel.staffSearchDataSource.officeId" bindValue="id"
                                        [clearable]="true"
                                        placeholder="--- {{ (masterModel.officeList!=null && masterModel.officeList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_ENTITY'|translate}}</label>
                                    <ng-select [items]="masterModel.entityList" disabled bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.entityId" bindValue="id"
                                        [clearable]="true"
                                        placeholder="--- {{ (masterModel.entityList!=null && masterModel.entityList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body"></ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_EMPLOYEE_TYPE' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.employeeType"
                                        (change)="onChangeEmployeeType()" [items]=" masterModel.employeeTypeList"
                                        bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.employeeTypeList!=null && masterModel.employeeTypeList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                        <div class="row marginTop15" *ngIf="toggleQCFilterSection">
                            <div class="col-sm-4 col-lg-4"
                                *ngIf="masterModel.staffSearchDataSource.employeeType===masterModel._EmployeeType.Outsource">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_OUTSOURCE_COMPANY' | translate}}</label>
                                    <ng-select [searchable]="true" [loading]="masterModel.outSourceCompanyLoading"
                                        [clearable]="true" [items]="masterModel.outSourceCompanyList" appendTo="body"
                                        bindLabel="name" bindValue="id" [hideSelected]="true"
                                        placeholder="--- {{(masterModel.outSourceCompanyList!=null && masterModel.outSourceCompanyList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA')  | translate }} ---"
                                        [(ngModel)]="masterModel.staffSearchDataSource.outSourceCompany">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_START_PORT' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.startPortId"
                                        [loading]="masterModel.startPortLoading" [items]=" masterModel.startPortList"
                                        placeholder="--- {{ (masterModel.startPortList!=null && masterModel.startPortList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        bindValue="id" [clearable]="true" appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_ZONE' | translate}}</label>
                                    <ng-select [items]="masterModel.zoneList" bindLabel="name" bindValue="id"
                                        [loading]="masterModel.zoneLoading" [virtualScroll]="true"
                                        placeholder="--- {{(masterModel.zoneList!=null && masterModel.zoneList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA')  | translate }} ---"
                                        [clearable]="true" appendTo="body" [typeahead]="masterModel.zoneInput"
                                        [(ngModel)]="masterModel.staffSearchDataSource.zoneId"
                                        (scrollToEnd)="getZoneData(true)" #select></ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4"
                                [ngClass]="{'marginTop15':masterModel.staffSearchDataSource.employeeType===masterModel._EmployeeType.Outsource}">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_MARKET_SEGMENT' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.marketSegmentId"
                                        [loading]="masterModel.marketSegmentLoading"
                                        [items]=" masterModel.marketSegmentList" bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.marketSegmentList!=null && masterModel.marketSegmentList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4 marginTop15">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_PRODUCT_CATEGORY' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.productCategoryId"
                                        [loading]="masterModel.productCategoryLoading"
                                        [items]=" masterModel.productCategoryList" bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.productCategoryList!=null && masterModel.productCategoryList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-sm-4 marginTop15">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_EXPERTISE' | translate}}</label>
                                    <ng-select bindLabel="name"
                                        [(ngModel)]="masterModel.staffSearchDataSource.expertiseId"
                                        [loading]="masterModel.expertiseLoading" [items]=" masterModel.expertiseList"
                                        bindValue="id" [clearable]="true"
                                        placeholder="--- {{ (masterModel.expertiseList!=null && masterModel.expertiseList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="advanced-search marginBottom24 w-100">
                        <div class="row">
                            <div class="col-12 col-sm-6">
                                <div class="advanced-search marginBottom24" (click)="toggleQCFilter()">
                                    <img class="icon" src="assets/images/expand-new.svg" *ngIf="!toggleQCFilterSection"
                                        alt="">
                                    <img class="icon" src="assets/images/collapse-new.svg" *ngIf="toggleQCFilterSection"
                                        alt=""> {{'COMMON.LBL_ADVANCED_SEARCH' | translate}}
                                </div>
                            </div>
                            <div class="col-12 col-sm-6 text-right">
                                <button class="category-cta small mr-2 common-tooltip common-tooltip-top-2"
                                    data-tooltip="Reset" [disabled]="cancelLoading"
                                    (click)="resetQCFilter('Inspector')">
                                    <img src="assets/images/reload-new.svg" alt="Reset">
                                    <span>{{ 'COMMON.LBL_RESET' | translate}}</span>
                                </button>
                                <button id="btnSearch" [disabled]="masterModel.qcSearchLoading"
                                    class="primary-cta small" (click)="filterQC('Inspector')">
                                    {{'COMMON.LBL_SEARCH' | translate}}
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8 col-lg-8 col-sm-12">
                            <ng-select [items]="currentList.additionalQCList" class="multiple" multiple="true"
                                [typeahead]="masterModel.staffInput" [loading]="masterModel.staffLoading"
                                [minTermLength]="3" bindLabel="staffName" [clearable]="true" [virtualScroll]="true"
                                (clear)="clearStaff('Inspector')" [(ngModel)]="allocatedAddQC"
                                (scrollToEnd)="getStaffData(masterModel.staffAllocationType.AdditionalQC)"
                                [closeOnSelect]="false" placeholder="Select Additional QC" appendTo="body">
                                <ng-template ng-label-tmp let-item="item">
                                    <img class="ng-value-thumb" [src]="photourl" alt="">
                                    <span class="ng-value-label">{{item.staffName}}</span>
                                    <span class="ng-value-icon right" (click)="unselectAddQC(item)"
                                        aria-hidden="true"><img src="assets/images/new-set/close-ng-select.svg"
                                            alt=""></span>
                                </ng-template>
                                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                    <div class="d-flex align-items-center">
                                        <div class="ng-dropdown-user-card">
                                            <img [src]="photourl" alt="">
                                            <div class="user-info">
                                                <div class="name">
                                                    {{item.staffName}}
                                                    <img alt="" class="verified" src="assets/images/verified.svg">
                                                </div>
                                                <div class="desc">{{item.location}}</div>
                                            </div>
                                        </div>
                                        <div class="styled-checkbox-container">
                                            <input class="styled-checkbox" id="item-{{index}}" type="checkbox"
                                                [ngModel]="item$.selected">
                                            <label for="checkbox-2"></label>
                                        </div>
                                    </div>
                                </ng-template>
                            </ng-select>
                        </div>
                        <div class="col-md-4 col-lg-4 col-sm-12" *ngIf="allocatedAddQC.length>0">
                            <div class="marginTop20">
                                <button class="primary-cta small" [disabled]="masterModel.qcSearchLoading"
                                    (click)="addMore(masterModel.staffAllocationType.AdditionalQC)">Apply
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</ng-template>


<ng-template #csModel let-modal>
    <div class="modal-body header-small-modal">
        <div class="small-model">
            <div class="body new-padding">
                <div class="approve-modal-container">
                    <h4 class="modal-title marginBottom24">{{'SCHEDULE_SUMMARY.LBL_ASSIGN_CS' | translate}}
                        <img src="assets/images/black-close.svg" alt="close" class="close"
                            (click)="searchText = null; modal.dismiss('Cross click')">
                    </h4>
                    <div class="qc-filter-container marginBottom10">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="my-input-group">
                                    <label>{{'SCHEDULE_SUMMARY.LBL_OFFICE'|translate}}</label>
                                    <ng-select bindLabel="name" (change)="onChangeOfficeCS($event)"
                                        [items]="masterModel.officeList"
                                        [(ngModel)]="masterModel.staffSearchDataSource.officeId" bindValue="id"
                                        [clearable]="true"
                                        placeholder="--- {{ (masterModel.officeList!=null && masterModel.officeList.length!=0? 'COMMON.LBL_SELECT':'COMMON.LBL_NO_DATA' ) | translate }} ---"
                                        appendTo="body">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="advanced-search marginBottom24 w-100">
                        <div class="row">
                            <div class="col-12 col-sm-6">
                            </div>
                            <div class="col-12 col-sm-6 text-right">
                                <button class="category-cta small mr-2 common-tooltip common-tooltip-top-2"
                                    data-tooltip="Reset" [disabled]="cancelLoading"
                                    (click)="resetQCFilter(masterModel.staffAllocationType.CS)">
                                    <img src="assets/images/reload-new.svg" alt="Reset">
                                    <span>{{ 'COMMON.LBL_RESET' | translate}}</span>
                                </button>
                                <button id="btnSearch" [disabled]="masterModel.qcSearchLoading"
                                    class="primary-cta small" (click)="filterQC('ReportChecker')">
                                    {{'COMMON.LBL_SEARCH' | translate}}
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div> -->
                    <div class="row marginTop25">
                        <div class="col-md-8 col-lg-8 col-sm-12">
                            <ng-select [items]="currentList.CSList" class="multiple" multiple="true"
                                placeholder="Select Report Checker" [loading]="masterModel.staffLoading"
                                [(ngModel)]="allocatedCS" bindLabel="staffName" [closeOnSelect]="false">
                                <ng-template ng-label-tmp let-item="item">
                                    <img class="ng-value-thumb" [src]="photourl" alt="">
                                    <span class="ng-value-label">{{item.staffName}}</span>
                                    <span class="ng-value-icon right" (click)="unselectCS(item)" aria-hidden="true"><img
                                            src="assets/images/new-set/close-ng-select.svg" alt=""></span>
                                </ng-template>
                                <ng-template ng-header-tmp>

                                    <div>
                                        <button class="secondary-cta x-small-new" (click)="onSelectAllCS()">Select
                                            All</button>
                                        <button class="secondary-cta x-small-new" (click)="onClearAllCS()">Clear
                                            All</button>
                                    </div>

                                </ng-template>
                                <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                                    <div class="d-flex align-items-center">
                                        <div class="ng-dropdown-user-card">
                                            <img [src]="photourl" alt="">
                                            <div class="user-info">
                                                <div class="name">
                                                    {{item.staffName}}
                                                    <img alt="" class="verified" src="assets/images/verified.svg">
                                                </div>
                                                <div class="desc">{{item.location}}</div>
                                            </div>
                                        </div>
                                        <div class="styled-checkbox-container">
                                            <input class="styled-checkbox" id="item-{{index}}" type="checkbox"
                                                [ngModel]="item$.selected">
                                            <label for="checkbox-2"></label>
                                        </div>
                                    </div>
                                </ng-template>
                            </ng-select>
                        </div>
                        <div class="col-md-4 col-lg-4 col-sm-12" *ngIf="allocatedCS.length>0">
                            <div class="marginTop20">
                                <button class="primary-cta small" [disabled]="masterModel.qcSearchLoading"
                                    (click)="addMore(masterModel.staffAllocationType.CS)">Apply
                                    <span *ngIf="masterModel.qcSearchLoading">
                                        <i class="fa fa-refresh fa-spin" aria-hidden="true"></i>
                                    </span></button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</ng-template>